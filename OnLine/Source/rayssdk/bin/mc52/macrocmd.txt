                    《聖魔爭霸》劇本編輯幫助
                    =========================

標識說明：#表示整數，%表示比較符號，&表示字(中間不能含空白字符)，
          $代表字符串(可含空白)，{}中內容代表此項可重复出現，
          []中內容表示可選項。


第一部分  系統指令
==================

(一)事件
    指令：
        PROC #事件編號
        [RETURN]
        ENDPROC
    說明：
        (a) PROC 為事件開始指令，ENDPROC 為事件結束指令，二者必須成對使用。
        (b) 0 號事件為程序直接調用事件
        (c) RETURN指令可以讓本事件馬上結束并返回；RETURN為可選項。

(二)分支控制之一
    指令：
        IF #變量 %比較符號 #數
        {ELSEIF #變量 %比較符號 # 數}
        ELSE
        ENDIF
    說明：
        (a) 比較 #變量 与 #數，當條件成立時，進行其下操作，直至ELSEIF(或ELSE)
            結束；否則，跳至下一個ELSEIF(或ELSE)執行，當遇到對應的ENDIF時結束。
        (2) 也可以有如下組合：
                IF # % #
                ELSE
                ENDIF
           或者
                IF # % #
                ENDIF
        (3) %比較符號即關系符號，可以為以下之一：
                 >(大于)         >=(大于或等于)         =(等于)
                 <(小于)         <=(小于或等于)         !=(不等于)

(三)分支控制之二
    指令：
        SWITCH #變量
                {CASE #數
                        ENDCASE}
        ENDSWITCH
    說明：
        (a) 逐一比較SWITCH之變量与CASE之數的值，當二者相等時，執行其下指令，
            直至ENDCASE結束并跳至ENDSWITCH結束分支控制；否則比較下一個。

(四)循環控制
    指令：
        WHILE #變量 %比較符號 #數
        [BREAK]
        ENDWHILE
    說明：
        (a) 當WHILE后的關系比較成立時，執行其下指令，至ENDWHILE時，再跳至
            WHILE繼續；直到條件不成立時退出循環，即執行ENDWHILE后的指令。
        (b) WHILE与ENDWHILE必須成對使用。
        (c) BREAK可以在中途強制退出循環，BREAK為可選項。

(五)其他控制
    指令：
        GOTO &標號字
    說明：
        (a) 跳轉至標號字執行。
        (b) 在劇本中定義標號字，前面必須加冒號(:)。
        (c) 不建議使用此指令

(六)調用
    指令：
        CALL #事件編號
        EXEC &劇本文件名
    說明：
        (a) 在某一事件中調用其他事件時，可用CALL此指令；當調用事件結束后，
            會繼續執行CALL以后的指令；調用事件限于本劇本中的既有事件。
        (b) 當需要退出本劇本而執行其他劇本時，用EXEC指令。

(七)變量運算
    指令：
        VAR #變量 #數
        ADD #變量 #數
        SUB #變量 #數
        MUL #變量 #數
        DEV #變量 #數
        RAND #變量 #數
    說明：
        (a) 變量的運算指令，分別為VAR(直接設定值)、ADD(加)、SUB(減)、MUL(乘)、
            DEV(除)及RAND(隨机數)。
        (b) 運算結果會存儲在該變量中。


第二部分  遊戲指令
==================

(一)地圖人物設定指令
    (1) 設定 NPC 所在地圖
        指令：NPC_LOCATE  #NPC編號   #所在地圖
        說明：本指令同時會將該 NPC 從其原來所在地圖上移除，同時將該 NPC 加入至新的
        　　　所在地圖。

    (2) 設定 NPC 的影像(動作圖檔組)
        指令：NPC_FILE #NPC編號   #圖檔編號
        說明：圖檔編號請參照 NPC 圖檔組列表。

    (3) 設定 NPC 的地圖位置
        指令：NPC_POSITION #NPC編號   #位置X  #位置Y  #位置Z
        說明：位置為像素點座標。

    (4) 設定 NPC 的方向
        指令：NPC_DIR #NPC編號    #方向
        說明：方向請參照小鍵盤，以５為中心；８，２，４，６分別為上，下，左，右；
        　　　１，３，９，７分別為左下，右下，右上，左上。

    (5) 設定 NPC 的標誌
        指令：NPC_FLAG #NPC編號  #標誌
        說明：

    (6) 設定 NPC 的移動速度
        指令：NPC_MOVE_SPEED #NPC編號   #移動速度
        說明：移動速度以像素點為單位，一般取８∼１６。根據ＮＰＣ的行走影像來定。

    (7) 設定 NPC 的動作
        指令：NPC_ACTION #NPC編號   #動作編號
        說明：動作編號取０∼１１，其具體意義如下：
        　　　０　　→　站立(城鎮)
        　　　１　　→　待機(戰場)
        　　　２　　→　行走(城鎮)
        　　　３　　→　移動(戰場)
        　　　４　　→　奔跑(戰場)
        　　　５　　→　攻擊(戰場)
        　　　６　　→　攻擊(戰場)
        　　　７　　→　被擊(戰場)
        　　　８　　→　施法(戰場)
        　　　９　　→　死亡(戰場)
        　　　１０　→　麻痺(戰場)
        　　　１１　→　特殊(戰場)
    (8) 設定 NPC 的類型
        指令：NPC_KIND #NPC編號   #類型
        說明：類型目前取 0。



(二)地圖音效音樂設定指令
    (1) 清除所在地圖的所有聲源
        指令：SNDSRC_CLEAR
        說明：

    (2) 設定所在地圖的聲源
        指令：SNDSRC_SET    #X  #Y  #Z  #最小時間間隔   #最大時間間隔   #音效文件名
        說明：X,Y,Z為聲源所在的地圖像素點座標，最小時間和最大時間為該聲源重複的時間間隔。
        　　　一般最小時間間隔用10，最大時間間隔用100。
        　　　音效文件名為放置在遊戲運行環境下SOUND子目錄中的音效文件的檔案名。
        範例：SNDSRC_SET 2485 1398 1 10 100 001.WAV

    (3) 停止背景音樂
        指令：STOP_MUSIC
        說明：

    (4) 播放背景音樂
        指令：PLAY_MUSIC    #音樂編號   #重複播放標誌
        說明：重複播放標誌為０或者１。０代表只播放一次，當音樂結束後，便不再重複。
        　　　而１代表重複播放。


(三)與 NPC 交互的指令
    (1) 清除對話
        指令：TALK_CLEAR
        說明：

    (2) 設定對話
        指令：TALK_SAY  #對話行號   $對話文字
        說明：對話支持最大８行，#對話行號取０∼７，設定的對話文字最長為２７個漢字。

    (3) 設定對話的後續事件
        指令：TALK_NEXT #下一個事件入口
        說明：

    (4) 顯示對話
        指令：TALK_SHOW
        說明：顯示對話，在連線系統中為服務器向客戶端傳送對話資料。

    (5) 清除選擇欄
        指令：CHOICE_CLEAR
        說明：

    (6) 設定選擇欄的標題
        指令：CHOICE_TITLE  $標題文字
        說明：標題文字最長為２７個漢字。

    (7) 設定選擇欄的選項
        指令：CHOICE_OPTION #選項編號  #後續事件入口   #選項文字
        說明：選項總共有８個，#選項編號取０∼７，選項文字最長為２４個漢字。

    (8) 顯示選擇欄
        指令：CHOICE_SHOW
        說明：顯示選擇欄，在連線系統中為服務器向客戶端傳送選擇欄資料供其選擇。


(四)玩家任務相關指令
    (1) 玩家接受任務
        指令：TASK_RECV #任務ID號   #任務進程值
        說明：#任務ID號為世界唯一之任務編號，#任務進程為紀錄任務進行程度的特徵值，
        　　　在接受任務時，默認為０。
        範例：TASK_RECV 100 0
        意義：玩家接受了ID號為100的任務，並且該任務進程為０。

    (2) 玩家完成了任務
        指令：TASK_FINISH   #任務ID號
        說明：玩家完成了某一個ID號的特定任務。

    (3) 檢查玩家任務的進行程度
        指令：TASK_CHECK    #任務ID號   #劇本臨時變量編號
        說明：檢查玩家對應ID號任務的進行程度，並且將該進程值存放在某個臨時劇本變量中。
        範例：TASK_CHECK 100 101
        意義：檢查玩家任務號為100的任務的進程，並且將該進程值存入第101號劇本變量中。
        　　　編輯中可以在隨後的劇本中引用該劇本變量作分支控制。如：
              ...
              TASK_CHECK 100 101
              IF 101 = -1       ;沒有接下本任務
                 ...
              ELSEIF 101 = 0    ;剛剛接下任務，還沒有進行。
                 ...
              ELSEIF 101 = 1    ;已經進行到第1步
                 ...
              ELSE
                 ...
              ENDIF

    (4) 直接設定玩家特定任務的進程
        指令：TASK_PROC_VAR #任務ID號   #任務進程
        說明：當玩家的對應任務有進行到某個關鍵點時，可以直接設定該玩家的新的任務進程狀況。
        　　　以便後續的劇本的進行。

    (5) 增加玩家特定任務的進程
        指令：TASK_PROC_ADD #任務ID號   #需要增加的任務進程值
        說明：當玩家

    (6) 減少玩家特定任務的進程
        指令：TASK_PROC_SUB #任務ID號   #需要減少的任務進程值
        說明：


(五)玩家自身變量相關指令
    (1) 設定玩家自身變量的值
        指令：LOCAL_VAR #玩家變量索引號   #要設定的值
        說明：#玩家變量索引號從0~255。

    (2) 檢查玩家自身變量的值
        指令：LOCAL_CHECK #玩家變量索引號   #存放玩家變量值的劇本變量索引
        說明：

    (3) 增加玩家自身變量的值
        指令：LOCAL_ADD #玩家變量索引號   #要增加的值
        說明：

    (4) 減少玩家自身變量的值
        指令：LOCAL_SUB #玩家變量索引號   #要減少的值
        說明：

(六)玩家數值相關指令
    (1) 獲得經驗值
        指令：GET_EXP	#經驗值
        說明：

    (2) 獲得物品
        指令：GET_ITEM	#道具編號
        說明：

    (3) 獲得金錢
        指令：GET_CASH	#金錢數額
        說明：

    (4) 獲得技術點
        指令：GET_SKILL	#技術點
        說明：

    (5) 檢查經驗值
        指令：CHECK_EXP	#臨時劇本變量
        說明：檢查玩家的經驗值，同時將玩家的經驗值存放在指定的臨時劇本變量中。

    (6) 檢查道具
        指令：CHECK_ITEM	#道具編號	#臨時劇本變量
        說明：檢查玩家擁有指定道具的數量，同時將該數量存放在指定的臨時劇本變量中。

    (7) 檢查金錢
        指令：CHECK_CASH	#臨時劇本變量
        說明：檢查玩家擁有金錢數量，並將其存放在指定的臨時劇本變量中。

    (8) 檢查技術點
        指令：CHECK_SKILL	#臨時劇本變量
        說明：檢查玩家擁有的未分配之技術點數，並將其存放在指定的臨時劇本變量中。
        
    (9) 使用物品
        指令：USE_ITEM	#道具編號
        說明：
        
    (10)使用金錢
        指令：USE_CASH	#金錢數量
        說明：
        
        

(七)遊戲世界設定指令
	(1) 清除遊戲中全部任務列表介紹
        指令：TASKBAR_RESET
        說明：本指令將清除遊戲中全部任務介紹。
        
	(2) 清處遊戲中某個任務的介紹
        指令：TASKBAR_CLEAR		#任務編號
        說明：清除指定任務的介紹文字。
        
	(3) 設定遊戲中某個任務的介紹
        指令：TASKBAR_PROMPT	#任務編號	#提示文字行  $提示文字
        說明：設定指定任務的提示文字。每個任務的提示文字介紹可以有２行，每行不超過
        　　　１３個漢字。#提示文字行取值範圍為０∼１。
        
	